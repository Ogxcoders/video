# ==============================================================================
# VPS API Environment Configuration
# Video Processing System for 10k+ Videos
# ==============================================================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env (if using standalone deployment)
# 2. For Coolify/Docker Compose, set these values in docker-compose.yml or Coolify UI
# 3. Replace all placeholder values with your actual secure values
# 4. Never commit .env file to version control
#
# ==============================================================================

# ==============================================================================
# SECURITY SETTINGS (REQUIRED - CHANGE THESE!)
# ==============================================================================

# API Key for authenticating requests from WordPress
# Generate: openssl rand -hex 32
# This must match the "API Key" setting in WordPress plugin settings
API_KEY=CHANGE_THIS_TO_YOUR_SECURE_API_KEY_64_CHARS

# Webhook Secret for verifying webhook signatures
# Generate: openssl rand -hex 32
# This must match the "Webhook Secret" setting in WordPress plugin settings
WEBHOOK_SECRET=CHANGE_THIS_TO_YOUR_SECURE_WEBHOOK_SECRET_64_CHARS

# Dashboard Admin Password (for /dashboard.php)
# Generate: openssl rand -base64 32
ADMIN_PASSWORD=CHANGE_THIS_TO_YOUR_SECURE_PASSWORD

# ==============================================================================
# REDIS CONFIGURATION (REQUIRED)
# ==============================================================================

# Redis server hostname
# Use "redis" for Docker Compose, or "localhost" for standalone
REDIS_HOST=redis

# Redis server port
REDIS_PORT=6379

# ==============================================================================
# WORKER CONFIGURATION (REQUIRED)
# ==============================================================================

# Number of parallel workers for video processing
# Recommended: 5 workers for optimal performance
# Range: 1-10 workers
WORKER_COUNT=5

# ==============================================================================
# WORDPRESS INTEGRATION (REQUIRED)
# ==============================================================================

# WordPress webhook endpoint URL
# Format: https://YOUR-WORDPRESS-SITE.com/wp-json/cvp/v1/webhook
# This is where processing results will be sent
WORDPRESS_WEBHOOK_URL=https://ogtemplate.com/wp-json/cvp/v1/webhook

# ==============================================================================
# MEDIA STORAGE CONFIGURATION (REQUIRED)
# ==============================================================================

# Base path for media storage (server filesystem path)
# Format: /YYYY/MM/postId/ structure will be created under this path
# Example: /var/www/media/content/2025/11/12345/
MEDIA_BASE_PATH=/var/www/media/content

# Base URL for media access (publicly accessible URL)
# This should point to where MEDIA_BASE_PATH is served via web server
# Example: https://v.ogtemplate.com/content/2025/11/12345/master.m3u8
MEDIA_BASE_URL=https://v.ogtemplate.com/content

# ==============================================================================
# OPTIONAL SETTINGS
# ==============================================================================

# Debug mode (set to "true" for verbose logging)
DEBUG=false

# Allowed CORS origins (comma-separated)
# Leave empty to allow all origins
ALLOWED_ORIGINS=https://ogtemplate.com

# FFmpeg binary path (usually auto-detected)
FFMPEG_PATH=/usr/bin/ffmpeg

# ==============================================================================
# LEGACY SETTINGS (For backward compatibility - not required for 10k+ system)
# ==============================================================================

# Legacy base URL (used by old single-video endpoint)
BASE_URL=https://post.trendss.net

# Legacy HLS URL base (used by old HLS directory structure)
HLS_URL_BASE=https://post.trendss.net/hls

# Legacy parallel limit (not used by Redis queue system)
PARALLEL_LIMIT=1

# ==============================================================================
# DEPLOYMENT EXAMPLES
# ==============================================================================

# Example 1: Production Deployment
# ---------------------------------
# API_KEY=a8f3c9e1d2b4f6a8e3c1d9f2b8a4e6c9d1f8a3e2b9f4c6a1d8e3f9b2c4a6e8
# WEBHOOK_SECRET=e9f2b8a4c6d1f8a3e2b9f4c6a1d8e3f9b2c4a6e8d1f3b9a2c8e4f6a1d9b3c
# ADMIN_PASSWORD=P@ssw0rd!Str0ng#2025
# REDIS_HOST=redis
# WORDPRESS_WEBHOOK_URL=https://yoursite.com/wp-json/cvp/v1/webhook
# MEDIA_BASE_PATH=/var/www/media/content
# MEDIA_BASE_URL=https://media.yoursite.com/content

# Example 2: Local Development
# -----------------------------
# API_KEY=dev_api_key_not_for_production
# WEBHOOK_SECRET=dev_webhook_secret_not_for_production
# ADMIN_PASSWORD=admin123
# REDIS_HOST=localhost
# WORDPRESS_WEBHOOK_URL=http://localhost:8080/wp-json/cvp/v1/webhook
# MEDIA_BASE_PATH=/var/www/media/content
# MEDIA_BASE_URL=http://localhost/content
# DEBUG=true

# ==============================================================================
# WORDPRESS PLUGIN SETTINGS (Configure in WP Admin)
# ==============================================================================
#
# After setting up these environment variables, configure the WordPress plugin:
#
# 1. Go to: WP Admin > Video Processor > Settings
#
# 2. Set these values:
#    - Web B API Endpoint: https://post.trendss.net/index.php
#    - API Key: <same as API_KEY above>
#    - Webhook Secret: <same as WEBHOOK_SECRET above>
#
# 3. The webhook URL will be automatically displayed (copy to VPS API env vars)
#
# ==============================================================================

# ==============================================================================
# SECURITY BEST PRACTICES
# ==============================================================================
#
# 1. Use strong, randomly generated secrets (minimum 64 characters)
# 2. Never use the same key for API_KEY and WEBHOOK_SECRET
# 3. Never commit .env file to version control
# 4. Rotate secrets regularly (every 90 days recommended)
# 5. Use different values for development and production
# 6. Keep backups of your .env file in a secure location
#
# ==============================================================================

# ==============================================================================
# VERIFICATION CHECKLIST
# ==============================================================================
#
# Before going to production, verify:
# [ ] All CHANGE_THIS_* values have been replaced
# [ ] API_KEY matches WordPress plugin settings
# [ ] WEBHOOK_SECRET matches WordPress plugin settings
# [ ] WORDPRESS_WEBHOOK_URL is correct and accessible
# [ ] MEDIA_BASE_URL points to a publicly accessible location
# [ ] Redis is accessible at REDIS_HOST:REDIS_PORT
# [ ] FFmpeg is installed and accessible
# [ ] /health.php returns "healthy" status
#
# ==============================================================================
